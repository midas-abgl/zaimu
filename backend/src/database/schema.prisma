generator kysely {
    provider = "prisma-kysely"
    output = "./"
    fileName = "types.ts"
	decimalTypeOverride = "number"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
}

model Account {
	id              String        @db.Uuid @default(dbgenerated("gen_random_uuid()")) @id
	name            String        @db.VarChar()
	transactionsIn  Transaction[] @relation("Transaction_destination")
	transactionsOut Transaction[] @relation("Transaction_origin")
	createdAt       DateTime      @default(now())
	updatedAt       DateTime      @default(now()) @updatedAt
}

model Transaction {
    id            String   @db.Uuid @default(dbgenerated("gen_random_uuid()")) @id
    amount        Decimal  @db.Decimal(8, 3)
    date          DateTime @db.Timestamptz()
	description   String?  @db.VarChar()
    originId      String   @db.Uuid
    origin        Account  @relation("Transaction_origin", fields: [originId], references: [id])
    destinationId String   @db.Uuid
    destination   Account  @relation("Transaction_destination",fields: [destinationId], references: [id])
    createdAt     DateTime @default(now())
    updatedAt     DateTime @default(now()) @updatedAt
}
